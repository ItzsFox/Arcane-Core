#place on lava
execute as @a[scores={deaths=1}] at @s run execute if block ~ ~ ~ minecraft:obsidian run summon allay ~ ~1 ~ {Invulnerable:1b,NoAI:1b,PersistenceRequired:1b,Tags:["soul"],active_effects:[{id:resistance,duration:100000,amplifier:255,show_particles:0b},{id:glowing,duration:100000,amplifier:1,show_particles:0b},{id:invisibility,duration:3,amplifier:1,show_particles:0b}],HandItems:[{id:"minecraft:compass",count:1,components:{max_stack_size:1,item_model:"arcore:soul_crystal",custom_name:'["",{"text":"a","italic":false,"color":"light_purple","obfuscated":true},{"italic":false,"text":" "},{"italic":false,"text":"Soul Crystal ","color":"dark_purple","bold":true},{"italic":false,"text":"a","color":"light_purple","obfuscated":true}]',lore:['["",{"text":"An arcane artifact tied to the soul of a fallen player.","italic":false,"color":"yellow"}]','["",{"text":"Though it is not powerful enough to revive a soul on its own;","color":"dark_purple"}]','["",{"text":"by offering it enough XP, it can be used to restore life.","color":"dark_purple"}]','[""]','["",{"text":"Hold crouch to revive","italic":false,"color":"gray"}]'],enchantment_glint_override:true,enchantments:{levels:{unbreaking:1},show_in_tooltip:false},unbreakable:{show_in_tooltip:false},hide_additional_tooltip:{}}},{id:"minecraft:air"}],HandDropChances:[0f,0f]}

#place mid air
execute as @a[scores={deaths=1}] at @s run execute if block ~ ~-1 ~ minecraft:air run summon allay ~ ~ ~ {Invulnerable:1b,NoAI:1b,PersistenceRequired:1b,Tags:["soul"],active_effects:[{id:resistance,duration:100000,amplifier:255,show_particles:0b},{id:glowing,duration:100000,amplifier:1,show_particles:0b},{id:invisibility,duration:3,amplifier:1,show_particles:0b}],HandItems:[{id:"minecraft:compass",count:1,components:{max_stack_size:1,item_model:"arcore:soul_crystal",custom_name:'["",{"text":"a","italic":false,"color":"light_purple","obfuscated":true},{"italic":false,"text":" "},{"italic":false,"text":"Soul Crystal ","color":"dark_purple","bold":true},{"italic":false,"text":"a","color":"light_purple","obfuscated":true}]',lore:['["",{"text":"An arcane artifact tied to the soul of a fallen player.","italic":false,"color":"yellow"}]','["",{"text":"Though it is not powerful enough to revive a soul on its own;","color":"dark_purple"}]','["",{"text":"by offering it enough XP, it can be used to restore life.","color":"dark_purple"}]','[""]','["",{"text":"Hold crouch to revive","italic":false,"color":"gray"}]'],enchantment_glint_override:true,enchantments:{levels:{unbreaking:1},show_in_tooltip:false},unbreakable:{show_in_tooltip:false},hide_additional_tooltip:{}}},{id:"minecraft:air"}],HandDropChances:[0f,0f]}

#place on void
execute as @a[scores={deaths=1}] at @s run execute if score @s y matches ..-120 run summon allay ~ 0 ~ {Invulnerable:1b,NoAI:1b,PersistenceRequired:1b,Tags:["soul"],active_effects:[{id:resistance,duration:100000,amplifier:255,show_particles:0b},{id:glowing,duration:100000,amplifier:1,show_particles:0b},{id:invisibility,duration:3,amplifier:1,show_particles:0b}],HandItems:[{id:"minecraft:compass",count:1,components:{max_stack_size:1,item_model:"arcore:soul_crystal",custom_name:'["",{"text":"a","italic":false,"color":"light_purple","obfuscated":true},{"italic":false,"text":" "},{"italic":false,"text":"Soul Crystal ","color":"dark_purple","bold":true},{"italic":false,"text":"a","color":"light_purple","obfuscated":true}]',lore:['["",{"text":"An arcane artifact tied to the soul of a fallen player.","italic":false,"color":"yellow"}]','["",{"text":"Though it is not powerful enough to revive a soul on its own;","color":"dark_purple"}]','["",{"text":"by offering it enough XP, it can be used to restore life.","color":"dark_purple"}]','[""]','["",{"text":"Hold crouch to revive","italic":false,"color":"gray"}]'],enchantment_glint_override:true,enchantments:{levels:{unbreaking:1},show_in_tooltip:false},unbreakable:{show_in_tooltip:false},hide_additional_tooltip:{}}},{id:"minecraft:air"}],HandDropChances:[0f,0f]}

#place on ground
execute as @a[scores={deaths=1}] at @s run execute unless block ~ ~ ~ minecraft:obsidian unless block ~ ~-1 ~ minecraft:air run summon allay ~ ~1 ~ {Invulnerable:1b,NoAI:1b,PersistenceRequired:1b,Tags:["soul"],active_effects:[{id:resistance,duration:100000,amplifier:255,show_particles:0b},{id:glowing,duration:100000,amplifier:1,show_particles:0b},{id:invisibility,duration:3,amplifier:1,show_particles:0b}],HandItems:[{id:"minecraft:compass",count:1,components:{max_stack_size:1,item_model:"arcore:soul_crystal",custom_name:'["",{"text":"a","italic":false,"color":"light_purple","obfuscated":true},{"italic":false,"text":" "},{"italic":false,"text":"Soul Crystal ","color":"dark_purple","bold":true},{"italic":false,"text":"a","color":"light_purple","obfuscated":true}]',lore:['["",{"text":"An arcane artifact tied to the soul of a fallen player.","italic":false,"color":"yellow"}]','["",{"text":"Though it is not powerful enough to revive a soul on its own;","color":"dark_purple"}]','["",{"text":"by offering it enough XP, it can be used to restore life.","color":"dark_purple"}]','[""]','["",{"text":"Hold crouch to revive","italic":false,"color":"gray"}]'],enchantment_glint_override:true,enchantments:{levels:{unbreaking:1},show_in_tooltip:false},unbreakable:{show_in_tooltip:false},hide_additional_tooltip:{}}},{id:"minecraft:air"}],HandDropChances:[0f,0f]}


#reset deaths

execute as @a if score @s deaths matches 1.. run scoreboard players set @s deaths 2